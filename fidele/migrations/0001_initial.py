# Generated by Django 5.1.3 on 2025-08-23 14:58

import django.contrib.gis.db.models.fields
import django.db.models.deletion
import django.utils.timezone
import django_countries.fields
import fidele.models
import phonenumber_field.modelfields
import simple_history.models
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('event', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Banner',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(blank=True, default='', max_length=200)),
                ('subtitle', models.CharField(blank=True, default='', max_length=300)),
                ('image', models.ImageField(upload_to=fidele.models.banner_upload_to)),
                ('link_url', models.URLField(blank=True, default='')),
                ('active', models.BooleanField(default=True)),
                ('order', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'ordering': ['order', '-updated_at'],
            },
        ),
        migrations.CreateModel(
            name='BibleVersion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(max_length=16, unique=True)),
                ('name', models.CharField(max_length=128)),
                ('language', models.CharField(default='fr', max_length=16)),
                ('total_verses', models.PositiveIntegerField(default=0)),
                ('etag', models.CharField(blank=True, default='', max_length=64)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'ordering': ['code'],
            },
        ),
        migrations.CreateModel(
            name='Competence',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(max_length=100)),
                ('categorie', models.CharField(max_length=50)),
                ('description', models.TextField(blank=True)),
            ],
        ),
        migrations.CreateModel(
            name='Department',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, max_length=200, null=True)),
                ('description', models.TextField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='DonationCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.SlugField(unique=True)),
                ('name', models.CharField(max_length=120)),
                ('min_amount', models.PositiveIntegerField(default=100)),
                ('max_amount', models.PositiveIntegerField(default=10000000)),
            ],
        ),
        migrations.CreateModel(
            name='Fonction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='MembreType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, max_length=200, null=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('duree', models.IntegerField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='PrayerCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(db_index=True, max_length=100)),
                ('icon', models.CharField(blank=True, max_length=50, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='TypeLocation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, default='ville', max_length=200)),
            ],
        ),
        migrations.CreateModel(
            name='AccountDeletionRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('requested_at', models.DateTimeField(auto_now_add=True)),
                ('processed_at', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(choices=[('requested', 'Requested'), ('processing', 'Processing'), ('done', 'Done'), ('canceled', 'Canceled'), ('failed', 'Failed')], default='requested', max_length=16)),
                ('notes', models.TextField(blank=True, default='')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='deletion_requests', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ('-requested_at',),
            },
        ),
        migrations.CreateModel(
            name='Device',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('token', models.CharField(max_length=255, unique=True)),
                ('platform', models.CharField(choices=[('android', 'Android'), ('ios', 'iOS')], max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('last_seen', models.DateTimeField(auto_now=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='devices', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Donation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('anonymous', models.BooleanField(default=False)),
                ('amount', models.PositiveIntegerField()),
                ('currency', models.CharField(default='XOF', max_length=3)),
                ('recurrence', models.CharField(choices=[('none', 'None'), ('weekly', 'Weekly'), ('monthly', 'Monthly'), ('quarterly', 'Quarterly'), ('semiannual', 'Semiannual')], default='none', max_length=16)),
                ('payment_method', models.CharField(choices=[('paystack', 'Paystack')], default='paystack', max_length=20)),
                ('reference', models.CharField(db_index=True, max_length=100, unique=True)),
                ('status', models.CharField(default='pending', max_length=20)),
                ('authorization_url', models.URLField(blank=True, default='')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('paid_at', models.DateTimeField(blank=True, null=True)),
                ('meta', models.JSONField(blank=True, default=dict)),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('category', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='fidele.donationcategory')),
            ],
        ),
        migrations.CreateModel(
            name='Eglise',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, max_length=250, null=True)),
                ('ville', models.CharField(blank=True, max_length=250, null=True)),
                ('pasteur', models.CharField(blank=True, max_length=250, null=True)),
                ('location', django.contrib.gis.db.models.fields.PointField(blank=True, null=True, srid=4326)),
                ('verse_du_jour', models.TextField(blank=True, null=True)),
                ('verse_reference', models.CharField(blank=True, max_length=100, null=True)),
                ('verse_date', models.DateField(default=django.utils.timezone.now)),
            ],
            options={
                'indexes': [models.Index(fields=['name'], name='fidele_egli_name_c3391c_idx')],
            },
        ),
        migrations.CreateModel(
            name='Familles',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, max_length=250, null=True)),
                ('mission', models.ForeignKey(blank=True, max_length=250, null=True, on_delete=django.db.models.deletion.CASCADE, to='fidele.eglise')),
            ],
        ),
        migrations.CreateModel(
            name='Fidele',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('firebase_uid', models.CharField(blank=True, max_length=128, null=True, unique=True)),
                ('qlook_id', models.CharField(default=fidele.models.qlook, editable=False, max_length=100, unique=True)),
                ('birthdate', models.DateField(blank=True, null=True)),
                ('sexe', models.CharField(blank=True, choices=[('Homme', 'Homme'), ('Femme', 'Femme')], max_length=100, null=True)),
                ('situation_matrimoniale', models.CharField(blank=True, choices=[('MARIE', 'MARIE'), ('CELIBATAIRE', 'CELIBATAIRE'), ('CONCUBINAGE', 'CONCUBINAGE'), ('UNION LIBRE', 'UNION LIBRE'), ('VEUF ', 'VEUF')], max_length=100, null=True)),
                ('signe', models.TextField(blank=True, max_length=500, null=True)),
                ('nbr_enfants', models.IntegerField(blank=True, null=True)),
                ('contry', django_countries.fields.CountryField(blank=True, max_length=2, null=True)),
                ('phone', phonenumber_field.modelfields.PhoneNumberField(blank=True, max_length=128, null=True, region='CI')),
                ('nationalite', models.CharField(blank=True, max_length=70, null=True)),
                ('eglise_origine', models.CharField(blank=True, max_length=270, null=True)),
                ('date_entree', models.DateField(blank=True, null=True)),
                ('date_bapteme', models.DateField(blank=True, null=True)),
                ('type_bapteme', models.CharField(blank=True, choices=[('Immersion', 'Immersion'), ('Aspersion', 'Aspersion')], max_length=100, null=True)),
                ('lieu_bapteme', models.CharField(blank=True, max_length=100, null=True)),
                ('profession', models.CharField(blank=True, max_length=270, null=True)),
                ('entreprise', models.CharField(blank=True, max_length=270, null=True)),
                ('mensual_revenue', models.DecimalField(blank=True, decimal_places=3, max_digits=10, null=True)),
                ('salary_currency', models.CharField(blank=True, max_length=20, null=True)),
                ('membre', models.SmallIntegerField(blank=True, default=0, null=True)),
                ('photo', models.ImageField(blank=True, default='abmci/users/7.png', null=True, upload_to='abmci/fideles')),
                ('sortie', models.SmallIntegerField(blank=True, default=0, null=True)),
                ('is_deleted', models.SmallIntegerField(blank=True, default=0, null=True)),
                ('slug', models.SlugField(blank=True, editable=False, help_text='slug field', null=True, unique=True, verbose_name='slug ')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('departement', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='fidele.department')),
                ('eglise', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='fidele.eglise')),
                ('famille_alliance', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='fidele.familles')),
                ('frere', models.ManyToManyField(blank=True, to='fidele.fidele')),
                ('marie_a', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='partenair', to='fidele.fidele')),
                ('mere', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='maternelle', to='fidele.fidele')),
                ('pere', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='paternelle', to='fidele.fidele')),
                ('soeur', models.ManyToManyField(blank=True, to='fidele.fidele')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='fidele', to=settings.AUTH_USER_MODEL)),
                ('fonction', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='fidele.fonction')),
            ],
            options={
                'permissions': (('can_edit_employee', 'Can edit employee'),),
            },
        ),
        migrations.CreateModel(
            name='EntretienPastoral',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('type_entretien', models.CharField(choices=[('SPI', 'Entretien spirituel'), ('DIS', 'Discipline'), ('ACC', 'Accompagnement'), ('CRI', 'Situation de crise')], max_length=3)),
                ('date', models.DateTimeField()),
                ('resume', models.TextField()),
                ('actions', models.TextField(blank=True)),
                ('confidential', models.BooleanField(default=False)),
                ('suivi_requis', models.BooleanField(default=False)),
                ('date_suivi', models.DateField(blank=True, null=True)),
                ('pasteur', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='entretiens_conduits', to=settings.AUTH_USER_MODEL)),
                ('fidele', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='entretiens', to='fidele.fidele')),
            ],
        ),
        migrations.AddField(
            model_name='department',
            name='responsable',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='responsable', to='fidele.fidele'),
        ),
        migrations.CreateModel(
            name='DemandePriere',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date_demande', models.DateTimeField(auto_now_add=True)),
                ('sujet', models.CharField(max_length=200)),
                ('details', models.TextField()),
                ('statut', models.CharField(choices=[('ACT', 'Active'), ('REP', 'Répondue'), ('ENC', 'En cours')], default='ACT', max_length=3)),
                ('date_reponse', models.DateField(blank=True, null=True)),
                ('temoignage', models.TextField(blank=True)),
                ('publique', models.BooleanField(default=False)),
                ('equipe_priere', models.ManyToManyField(blank=True, related_name='prieres_assignees', to=settings.AUTH_USER_MODEL)),
                ('demandeur', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='demandes_priere', to='fidele.fidele')),
            ],
        ),
        migrations.CreateModel(
            name='Deces',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date_deces', models.DateField()),
                ('lieu_deces', models.CharField(max_length=200)),
                ('cause', models.CharField(blank=True, max_length=200)),
                ('date_ceremonie', models.DateField()),
                ('lieu_ceremonie', models.CharField(max_length=200)),
                ('hommage', models.TextField(blank=True)),
                ('officiant', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ceremonies_deces', to=settings.AUTH_USER_MODEL)),
                ('defunt', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='deces', to='fidele.fidele')),
                ('participants', models.ManyToManyField(blank=True, related_name='ceremonies_deces_participes', to='fidele.fidele')),
            ],
        ),
        migrations.CreateModel(
            name='Conseil',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date_conseil', models.DateTimeField()),
                ('type_conseil', models.CharField(choices=[('MAT', 'Conseil matrimonial'), ('FAM', 'Conseil familial'), ('FIN', 'Conseil financier'), ('SPI', 'Conseil spirituel'), ('PRO', 'Orientation professionnelle')], max_length=3)),
                ('sujet', models.CharField(max_length=200)),
                ('notes', models.TextField()),
                ('recommandations', models.TextField()),
                ('confidential', models.BooleanField(default=True)),
                ('suivi_requis', models.BooleanField(default=False)),
                ('conseillers', models.ManyToManyField(related_name='conseils_donnes', to=settings.AUTH_USER_MODEL)),
                ('participants', models.ManyToManyField(related_name='conseils_recus', to='fidele.fidele')),
            ],
        ),
        migrations.CreateModel(
            name='Anniversaire',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date_anniversaire', models.DateField()),
                ('type_anniversaire', models.CharField(choices=[('NAISS', 'Anniversaire de naissance'), ('BAPT', 'Anniversaire de baptême'), ('MARI', 'Anniversaire de mariage'), ('CONV', 'Anniversaire de conversion')], max_length=50)),
                ('celebration_organisee', models.BooleanField(default=False)),
                ('date_celebration', models.DateField(blank=True, null=True)),
                ('cadeau', models.TextField(blank=True)),
                ('photos', models.FileField(blank=True, upload_to='anniversaires/')),
                ('fidele', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='anniversaires', to='fidele.fidele')),
                ('participants', models.ManyToManyField(blank=True, related_name='anniversaires_participes', to='fidele.fidele')),
            ],
        ),
        migrations.CreateModel(
            name='Location',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, max_length=150, null=True)),
                ('parent', models.ForeignKey(blank=True, default=None, null=True, on_delete=django.db.models.deletion.CASCADE, to='fidele.location')),
                ('type', models.ForeignKey(blank=True, default=1, null=True, on_delete=django.db.models.deletion.CASCADE, to='fidele.typelocation')),
            ],
        ),
        migrations.AddField(
            model_name='fidele',
            name='location',
            field=models.ForeignKey(blank=True, default=1, on_delete=django.db.models.deletion.CASCADE, to='fidele.location'),
        ),
        migrations.CreateModel(
            name='HistoricalFidele',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('firebase_uid', models.CharField(blank=True, db_index=True, max_length=128, null=True)),
                ('qlook_id', models.CharField(db_index=True, default=fidele.models.qlook, editable=False, max_length=100)),
                ('birthdate', models.DateField(blank=True, null=True)),
                ('sexe', models.CharField(blank=True, choices=[('Homme', 'Homme'), ('Femme', 'Femme')], max_length=100, null=True)),
                ('situation_matrimoniale', models.CharField(blank=True, choices=[('MARIE', 'MARIE'), ('CELIBATAIRE', 'CELIBATAIRE'), ('CONCUBINAGE', 'CONCUBINAGE'), ('UNION LIBRE', 'UNION LIBRE'), ('VEUF ', 'VEUF')], max_length=100, null=True)),
                ('signe', models.TextField(blank=True, max_length=500, null=True)),
                ('nbr_enfants', models.IntegerField(blank=True, null=True)),
                ('contry', django_countries.fields.CountryField(blank=True, max_length=2, null=True)),
                ('phone', phonenumber_field.modelfields.PhoneNumberField(blank=True, max_length=128, null=True, region='CI')),
                ('nationalite', models.CharField(blank=True, max_length=70, null=True)),
                ('eglise_origine', models.CharField(blank=True, max_length=270, null=True)),
                ('date_entree', models.DateField(blank=True, null=True)),
                ('date_bapteme', models.DateField(blank=True, null=True)),
                ('type_bapteme', models.CharField(blank=True, choices=[('Immersion', 'Immersion'), ('Aspersion', 'Aspersion')], max_length=100, null=True)),
                ('lieu_bapteme', models.CharField(blank=True, max_length=100, null=True)),
                ('profession', models.CharField(blank=True, max_length=270, null=True)),
                ('entreprise', models.CharField(blank=True, max_length=270, null=True)),
                ('mensual_revenue', models.DecimalField(blank=True, decimal_places=3, max_digits=10, null=True)),
                ('salary_currency', models.CharField(blank=True, max_length=20, null=True)),
                ('membre', models.SmallIntegerField(blank=True, default=0, null=True)),
                ('photo', models.TextField(blank=True, default='abmci/users/7.png', max_length=100, null=True)),
                ('sortie', models.SmallIntegerField(blank=True, default=0, null=True)),
                ('is_deleted', models.SmallIntegerField(blank=True, default=0, null=True)),
                ('slug', models.SlugField(blank=True, editable=False, help_text='slug field', null=True, verbose_name='slug ')),
                ('created_at', models.DateTimeField(blank=True, editable=False)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('departement', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='fidele.department')),
                ('eglise', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='fidele.eglise')),
                ('famille_alliance', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='fidele.familles')),
                ('fonction', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='fidele.fonction')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('marie_a', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='fidele.fidele')),
                ('mere', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='fidele.fidele')),
                ('pere', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='fidele.fidele')),
                ('user', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('location', models.ForeignKey(blank=True, db_constraint=False, default=1, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='fidele.location')),
                ('type_membre', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='fidele.membretype')),
            ],
            options={
                'verbose_name': 'historical fidele',
                'verbose_name_plural': 'historical fideles',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.AddField(
            model_name='fidele',
            name='type_membre',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='fidele.membretype'),
        ),
        migrations.CreateModel(
            name='NotePastorale',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateTimeField(auto_now_add=True)),
                ('titre', models.CharField(max_length=200)),
                ('contenu', models.TextField()),
                ('confidentialite', models.CharField(choices=[('PUB', 'Public'), ('PRI', 'Privé'), ('CON', 'Confidentiel')], default='PRI', max_length=3)),
                ('tags', models.CharField(blank=True, max_length=200)),
                ('auteur', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notes_redigees', to=settings.AUTH_USER_MODEL)),
                ('fidele', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notes_pastorales', to='fidele.fidele')),
            ],
        ),
        migrations.CreateModel(
            name='ParticipationService',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('role', models.CharField(max_length=100)),
                ('presence', models.BooleanField(default=False)),
                ('notes', models.TextField(blank=True)),
                ('fidele', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='fidele.fidele')),
            ],
        ),
        migrations.CreateModel(
            name='Permanence',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('titre', models.CharField(blank=True, max_length=150, null=True)),
                ('add_date', models.DateTimeField(auto_now_add=True)),
                ('auteur', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='auteur', to='fidele.fidele')),
                ('direction', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='fidele.department')),
                ('event', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='event.evenement')),
            ],
        ),
        migrations.CreateModel(
            name='OuvrierPermanence',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('position', models.CharField(blank=True, max_length=200, null=True)),
                ('activites', models.CharField(blank=True, max_length=500, null=True)),
                ('add_date', models.DateTimeField(auto_now_add=True)),
                ('date', models.DateTimeField(blank=True, null=True)),
                ('ouvrier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='fidele.fidele')),
                ('poste', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='fidele.fonction')),
                ('programme', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='fidele.permanence')),
            ],
        ),
        migrations.CreateModel(
            name='PrayerRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(db_index=True, max_length=200)),
                ('content', models.TextField()),
                ('prayer_type', models.CharField(choices=[('PR', 'Prière'), ('EX', 'Exhortation'), ('IN', 'Intercession')], db_index=True, default='PR', max_length=2)),
                ('audio_note', models.FileField(blank=True, null=True, upload_to='prayer_audios/')),
                ('is_anonymous', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='prayers', to='fidele.prayercategory')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='prayers', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PrayerComment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('content', models.TextField()),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='prayer_comments', to=settings.AUTH_USER_MODEL)),
                ('prayer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='comments', to='fidele.prayerrequest')),
            ],
            options={
                'ordering': ['created_at'],
            },
        ),
        migrations.CreateModel(
            name='PrayerAttachment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('kind', models.CharField(choices=[('image', 'Image'), ('audio', 'Audio')], max_length=10)),
                ('file', models.FileField(upload_to='prayers/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('prayer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attachments', to='fidele.prayerrequest')),
            ],
        ),
        migrations.CreateModel(
            name='ProblemeParticulier',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('type_probleme', models.CharField(max_length=100)),
                ('description', models.TextField()),
                ('date_decouverte', models.DateField()),
                ('gravite', models.CharField(choices=[('F', 'Faible'), ('M', 'Moyen'), ('E', 'Élevé'), ('C', 'Critique')], default='M', max_length=1)),
                ('statut', models.CharField(default='En cours', max_length=20)),
                ('solution', models.TextField(blank=True)),
                ('date_resolution', models.DateField(blank=True, null=True)),
                ('fidele', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='problemes', to='fidele.fidele')),
                ('responsable', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Sacrement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('type_sacrement', models.CharField(choices=[('BAP', 'Baptême'), ('CEN', 'Sainte Cène'), ('MAR', 'Mariage'), ('ONC', 'Onction'), ('REC', 'Réconciliation')], max_length=3)),
                ('date', models.DateField()),
                ('lieu', models.CharField(max_length=200)),
                ('documents', models.FileField(blank=True, upload_to='sacrements/')),
                ('notes', models.TextField(blank=True)),
                ('fidele', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sacrements', to='fidele.fidele')),
                ('officiant', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sacrements_adminitres', to=settings.AUTH_USER_MODEL)),
                ('temoins', models.ManyToManyField(blank=True, related_name='sacrements_temoignes', to='fidele.fidele')),
            ],
        ),
        migrations.CreateModel(
            name='Service',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(max_length=100)),
                ('date', models.DateField()),
                ('description', models.TextField(blank=True)),
                ('participants', models.ManyToManyField(related_name='services_participes', through='fidele.ParticipationService', to='fidele.fidele')),
                ('responsable', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='fidele.fidele')),
            ],
        ),
        migrations.AddField(
            model_name='participationservice',
            name='service',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='fidele.service'),
        ),
        migrations.CreateModel(
            name='SujetPriere',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('titre', models.CharField(blank=True, max_length=250, null=True)),
                ('descriptif', models.TextField(blank=True, null=True)),
                ('date', models.DateTimeField(auto_now_add=True, null=True)),
                ('traitement', models.BooleanField(blank=True, default=False, null=True)),
                ('fidele', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='fidele.fidele')),
            ],
        ),
        migrations.CreateModel(
            name='TransferHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date_transfert', models.DateTimeField(auto_now_add=True)),
                ('motif', models.TextField()),
                ('ancienne_eglise', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sorties', to='fidele.eglise')),
                ('effectue_par', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('fidele', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transferts', to='fidele.fidele')),
                ('nouvelle_eglise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='entrees', to='fidele.eglise')),
            ],
            options={
                'verbose_name_plural': 'Historique des transferts',
                'ordering': ['-date_transfert'],
            },
        ),
        migrations.CreateModel(
            name='UserProfileCompletion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_complete', models.BooleanField(default=False)),
                ('current_step', models.PositiveIntegerField(default=1)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='BibleTag',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('version', models.CharField(max_length=16)),
                ('book', models.CharField(max_length=64)),
                ('chapter', models.PositiveIntegerField()),
                ('verse', models.PositiveIntegerField()),
                ('comment', models.TextField(blank=True, default='')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('recipient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tags_received', to=settings.AUTH_USER_MODEL)),
                ('sender', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tags_sent', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['recipient', 'created_at'], name='fidele_bibl_recipie_2b58ef_idx')],
            },
        ),
        migrations.CreateModel(
            name='BibleVerse',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('book', models.CharField(max_length=64)),
                ('chapter', models.PositiveIntegerField()),
                ('verse', models.PositiveIntegerField()),
                ('text', models.TextField()),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('version', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='verses', to='fidele.bibleversion')),
            ],
            options={
                'indexes': [models.Index(fields=['version', 'book'], name='fidele_bibl_version_1cac3b_idx'), models.Index(fields=['version', 'book', 'chapter'], name='fidele_bibl_version_da66d9_idx')],
                'unique_together': {('version', 'book', 'chapter', 'verse')},
            },
        ),
        migrations.CreateModel(
            name='FidelePosition',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('latitude', models.DecimalField(decimal_places=6, max_digits=9)),
                ('longitude', models.DecimalField(decimal_places=6, max_digits=9)),
                ('accuracy', models.DecimalField(blank=True, decimal_places=2, max_digits=7, null=True)),
                ('captured_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('source', models.CharField(choices=[('manual', 'Manual'), ('browser', 'Browser'), ('mobile_gps', 'Mobile GPS'), ('other', 'Other')], default='manual', max_length=20)),
                ('note', models.CharField(blank=True, max_length=255, null=True)),
                ('fidele', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='positions', to='fidele.fidele')),
            ],
            options={
                'ordering': ['-captured_at'],
                'indexes': [models.Index(fields=['fidele', 'captured_at'], name='fidele_fide_fidele__2ad03c_idx')],
            },
        ),
        migrations.CreateModel(
            name='Notification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('type', models.CharField(db_index=True, default='GENERIC', max_length=40)),
                ('title', models.CharField(max_length=200)),
                ('body', models.TextField()),
                ('data', models.JSONField(blank=True, default=dict)),
                ('is_read', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['user', 'is_read'], name='fidele_noti_user_id_4edd0d_idx'), models.Index(fields=['type'], name='fidele_noti_type_1d4d39_idx'), models.Index(fields=['-created_at'], name='fidele_noti_created_87fbcf_idx')],
            },
        ),
        migrations.CreateModel(
            name='PrayerLike',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='prayer_likes', to=settings.AUTH_USER_MODEL)),
                ('prayer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='likes', to='fidele.prayerrequest')),
            ],
            options={
                'indexes': [models.Index(fields=['prayer', 'user'], name='fidele_pray_prayer__c11155_idx')],
                'unique_together': {('prayer', 'user')},
            },
        ),
        migrations.CreateModel(
            name='VerseOfDay',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField(default=django.utils.timezone.localdate)),
                ('version', models.CharField(default='LSG', max_length=16)),
                ('language', models.CharField(default='fr', max_length=16)),
                ('context_key', models.CharField(db_index=True, default='DEFAULT', max_length=64)),
                ('text', models.TextField()),
                ('reference', models.CharField(max_length=128)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('eglise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='vods', to='fidele.eglise')),
            ],
            options={
                'indexes': [models.Index(fields=['eglise', 'date'], name='fidele_vers_eglise__95c549_idx'), models.Index(fields=['version', 'language'], name='fidele_vers_version_2eb245_idx')],
                'unique_together': {('date', 'eglise')},
            },
        ),
        migrations.CreateModel(
            name='VerseUsage',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('used_on', models.DateField(db_index=True, default=django.utils.timezone.localdate)),
                ('version', models.CharField(default='LSG', max_length=16)),
                ('book', models.CharField(max_length=64)),
                ('chapter', models.PositiveIntegerField()),
                ('verse', models.PositiveIntegerField()),
                ('eglise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='verse_usages', to='fidele.eglise')),
            ],
            options={
                'indexes': [models.Index(fields=['eglise', 'used_on'], name='fidele_vers_eglise__4cb6ff_idx'), models.Index(fields=['eglise', 'book', 'chapter', 'verse'], name='fidele_vers_eglise__2fd349_idx')],
            },
        ),
    ]
